
<!DOCTYPE html>
<html>
<head>
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body {
	font-family: "Raleway", Arial, sans-serif;
	color: var(--tg-theme-text-color);
         background: var(--tg-theme-bg-color);
         display: flex;
         flex-direction: column;
         align-items: center;
         font-size: 18px;
}
.w3-row img {margin-bottom: -8px}
</style>
</head>
<body>

<!-- !PAGE CONTENT! -->
<div class="w3-content" style="max-width:1500px">

  

  <!-- Photo Grid -->
  <div class="w3-row">
    <div class="w3-half">
      <img src="bot.png" onclick="sendMessage();" style="width:30%">
      <img src="hello.png" style="width:30%">
      <img src="robot.png" style="width:30%">
	</div>
  </div>

<div id="usercard"> </div>
  
<!-- End Page Content -->
</div>
 
</body>
<script>
   var tg = window.Telegram.WebApp; //получаем объект webapp телеграма 
   tg.expand();

   var sendMessage = () => {
	   //alert('sendMessage');
	//var data = JSON.stringify({test: "test1",test2: "test2"});
	$.ajax({
            url: 'https://2ace-49-48-115-14.ngrok-free.app',
            type: "POST",
            dataType: "json",
            data: JSON.stringify({
                "id": "1231231",
                "name": "test",
                "type": "json",
                "description": "test ajax",
                "email": "test@test"
            }),
            success: function(result) {
                alert(result);
            }
        });
   	/*$.ajax("https://2ace-49-48-115-14.ngrok-free.app/", {
    		type: 'POST',
		datatype: 'JSON',
    		data: JSON.stringify({
                	"id": "1231231",
                	"name": "test",
                	"type": "json",
                	"description": "test ajax",
                	"email": "test@test"
            	}),
            	success: function(result) {
                	alert(result.response);
            	}
  	})*/
   }
  
   let usercard = document.getElementById("usercard"); //получаем блок usercard 

   let profName = document.createElement('p'); //создаем параграф
   profName.innerText = `${tg.initDataUnsafe.user.first_name}
   ${tg.initDataUnsafe.user.last_name}
   ${tg.initDataUnsafe.user.username} (${tg.initDataUnsafe.user.language_code})`;
   //выдем имя, "фамилию", через тире username и код языка
   usercard.appendChild(profName); //добавляем 

   let userid = document.createElement('p'); //создаем еще параграф 
   userid.innerText = `${tg.initDataUnsafe.user.id}`; //показываем user_id
   usercard.appendChild(userid); //добавляем


   //работает только в attachment menu
   // let pic = document.createElement('img'); //создаем img
   // pic.src = tg.initDataUnsafe.user.photo_url; //задаём src 
   // usercard.appendChild(pic); //добавляем элемент в карточку 
</script>
</html>
