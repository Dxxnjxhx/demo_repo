
<!DOCTYPE html>
<html>
<head>
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
	font-family: "Raleway", Arial, sans-serif;
	color: var(--tg-theme-text-color);
         background: var(--tg-theme-bg-color);
         display: flex;
         flex-direction: column;
         align-items: center;
         font-size: 18px;
}
.w3-row img {margin-bottom: -8px}
</style>
</head>
<body>

<!-- !PAGE CONTENT! -->
<div class="w3-content" style="max-width:1500px">

  

  <!-- Photo Grid -->
  <div class="w3-row">
    <div class="w3-half">
      <img src="robot.png" onclick="sendMessage();" style="width:25%">
      <img src="hello.png" onclick="sendHello();" style="width:25%">
      <a id="regular_link" href="https://core.telegram.org/bots"><img src="bot.png" style="width:25%"></a>
	</div>
  </div>

<!--<div id="usercard"> </div>-->
  
<!-- End Page Content -->
</div>
 
</body>
<script>


	
   var tg = window.Telegram.WebApp; //получаем объект webapp телеграма 
   //tg.expand();

   var sendMessage = () => {
	//alert('sendMessage');
	//var data = JSON.stringify({test: "test1",test2: "test2"});
	
   	$.ajax({
		url: "https://c082-49-48-115-14.ngrok-free.app/hi",
    		type: "POST",
		dataType: "json",
		headers: {
    			'Content-Type': 'application/json',
        		'Accept': 'application/json'
  		},
    		data: JSON.stringify({
        		'access_token': tg.initDataUnsafe
    		}),
            	success: function(res) {
                	//alert("success");
			tg.close();
            	}
  	});
   }

   var sendHello = () => {
	//alert('sendMessage');
	//var data = JSON.stringify({test: "test1",test2: "test2"});
	
   	$.ajax({
		url: "https://2ace-49-48-115-14.ngrok-free.app/hello",
    		type: "POST",
		dataType: "json",
		headers: {
    			'Content-Type': 'application/json',
        		'Accept': 'application/json'
  		},
    		data: JSON.stringify({
        		'access_token': tg.initDataUnsafe
    		}),
            	success: function(res) {
                	//alert("success");
			tg.close();
            	}
  	});
   }
  
   /*
   let usercard = document.getElementById("usercard"); //получаем блок usercard 

   let profName = document.createElement('p'); //создаем параграф
   profName.innerText = `${tg.initDataUnsafe.user.first_name}
   ${tg.initDataUnsafe.user.last_name}
   ${tg.initDataUnsafe.user.username} (${tg.initDataUnsafe.user.language_code})`;
   //выдем имя, "фамилию", через тире username и код языка
   usercard.appendChild(profName); //добавляем 

   let userid = document.createElement('p'); //создаем еще параграф 
   userid.innerText = `${tg.initDataUnsafe.user.id}`; //показываем user_id
   usercard.appendChild(userid); //добавляем
   */


   //работает только в attachment menu
   // let pic = document.createElement('img'); //создаем img
   // pic.src = tg.initDataUnsafe.user.photo_url; //задаём src 
   // usercard.appendChild(pic); //добавляем элемент в карточку 
</script>
</html>
